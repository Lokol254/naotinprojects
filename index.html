<!DOCTYPE html>
<html>
<head>
  <title>NAUSA Portal</title>
  <style>
    body { font-family: Arial; background: #f0f0f0; padding: 20px; }
    h2, h3 { color: #2c3e50; }
    form { margin: 15px 0; padding: 10px; background: #fff; border-radius: 8px; box-shadow: 0 0 5px #ccc; }
    input, select, button {
      display: block; width: 100%; padding: 10px; margin-bottom: 10px;
      border-radius: 5px; border: 1px solid #ccc;
    }
    table { border-collapse: collapse; width: 100%; background: #fff; margin-top: 20px; }
    table th, table td { padding: 10px; border: 1px solid #ddd; }
    .logout-btn, .export-btn { display: inline-block; margin: 10px 0; padding: 10px 15px; background: #27ae60; color: white; border: none; border-radius: 5px; text-decoration: none; }
  </style>
</head>
<body>

  {% if session.username %}
    <h2>Welcome, {{ session.username }}!</h2>
    <a class="logout-btn" href="/logout">Logout</a>

    {% if is_admin %}
      <h3>Admin Panel â€“ Student Records</h3>
      <table>
        <tr>
          <th>Name</th><th>Village</th><th>Phone</th><th>Parent Phone</th>
          <th>Designation</th><th>Year</th><th>AI Prediction</th>
        </tr>
        {% for student in students %}
        <tr>
          <td>{{ student.name }}</td><td>{{ student.village }}</td>
          <td>{{ student.phone }}</td><td>{{ student.parent_phone }}</td>
          <td>{{ student.designation }}</td><td>{{ student.year }}</td>
          <td>{{ student.ai_prediction }}</td>
        </tr>
        {% endfor %}
      </table>
      <a class="export-btn" href="/export">Export Excel</a>
    {% endif %}

    <h3>Add Your Details</h3>
    <form action="/submit" method="post">
      <input name="name" placeholder="Full Name" required>
      <input name="village" placeholder="Village" required>
      <input name="phone" placeholder="Your Phone Number" required>
      <input name="parent_phone" placeholder="Parent's Phone Number" required>
      <input name="designation" placeholder="Designation (e.g., Chair, Member)" required>
      <select name="year" required>
        <option value="">Select Year of Study</option>
        <option value="1st">1st Year</option>
        <option value="2nd">2nd Year</option>
        <option value="3rd">3rd Year</option>
        <option value="4th">4th Year</option>
      </select>
      <button type="submit">Submit</button>
    </form>

  {% else %}
    <h2>Login</h2>
    <form action="/login" method="post">
      <input name="username" placeholder="Username" required>
      <input name="password" type="password" placeholder="Password" required>
      <button type="submit">Login</button>
    </form>

    <h2>Register</h2>
    <form action="/register" method="post">
      <input name="username" placeholder="New Username" required>
      <input name="password" type="password" placeholder="New Password" required>
      <select name="role" required>
        <option value="student">Student</option>
        <option value="admin">Admin</option>
      </select>
      <button type="submit">Register</button>
    </form>
  {% endif %}

</body>
</html>